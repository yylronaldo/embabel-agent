# Embabel æ™ºèƒ½ä½“æ¡†æ¶

![Build](https://github.com/embabel/embabel-agent/actions/workflows/maven.yml/badge.svg)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=embabel_embabel-agent&metric=alert_status)](https://sonarcloud.io/summary/new_code?id=embabel_embabel-agent)
[![Discord](https://img.shields.io/discord/1277751399261798401?logo=discord)](https://discord.gg/t6bjkyj93q)

[//]: # ([![Quality Gate Status]&#40;https://sonarcloud.io/api/project_badges/measure?project=embabel_embabel-agent&metric=alert_status&token=d275d89d09961c114b8317a4796f84faf509691c&#41;]&#40;https://sonarcloud.io/summary/new_code?id=embabel_embabel-agent&#41;)

[//]: # ([![Bugs]&#40;https://sonarcloud.io/api/project_badges/measure?project=embabel_embabel-agent&metric=bugs&#41;]&#40;https://sonarcloud.io/summary/new_code?id=embabel_embabel-agent&#41;)
![Kotlin](https://img.shields.io/badge/kotlin-%237F52FF.svg?style=for-the-badge&logo=kotlin&logoColor=white)
![Java](https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=openjdk&logoColor=white)
![Spring](https://img.shields.io/badge/spring-%236DB33F.svg?style=for-the-badge&logo=spring&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-6DB33F.svg?style=for-the-badge&logo=Spring-Boot&logoColor=white)
![Apache Tomcat](https://img.shields.io/badge/apache%20tomcat-%23F8DC75.svg?style=for-the-badge&logo=apache-tomcat&logoColor=black)
![Apache Maven](https://img.shields.io/badge/Apache%20Maven-C71A36?style=for-the-badge&logo=Apache%20Maven&logoColor=white)
![JUnit](https://img.shields.io/badge/JUnit5-25A162.svg?style=for-the-badge&logo=JUnit5&logoColor=white)
![ChatGPT](https://img.shields.io/badge/chatGPT-74aa9c?style=for-the-badge&logo=openai&logoColor=white)
![Jinja](https://img.shields.io/badge/jinja-white.svg?style=for-the-badge&logo=jinja&logoColor=black)
![JSON](https://img.shields.io/badge/JSON-000?logo=json&logoColor=fff)
![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white)
![SonarQube](https://img.shields.io/badge/SonarQube-black?style=for-the-badge&logo=sonarqube&logoColor=4E9BCD)
![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white)
![IntelliJ IDEA](https://img.shields.io/badge/IntelliJIDEA-000000.svg?style=for-the-badge&logo=intellij-idea&logoColor=white)
[![License](https://img.shields.io/github/license/embabel/embabel-agent?style=for-the-badge&logo=apache&color=brightgreen)](https://www.apache.org/licenses/LICENSE-2.0)
[![Commits](https://img.shields.io/github/commit-activity/m/embabel/embabel-agent.svg?label=commits&style=for-the-badge&logo=git&logoColor=white)](https://github.com/embabel/embabel-agent/pulse)




<img align="left" src="https://github.com/embabel/embabel-agent/blob/main/embabel-agent-api/images/315px-Meister_der_Weltenchronik_001.jpg?raw=true" width="180">

&nbsp;&nbsp;&nbsp;&nbsp;

Embabelï¼ˆè¯»éŸ³ï¼šEm-BAY-belï¼‰æ˜¯ä¸€ä¸ªç”¨äºåœ¨ JVM ä¸Šæ„å»ºæ™ºèƒ½ä½“æµç¨‹çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿæ— ç¼åœ°å°†å¤§è¯­è¨€æ¨¡å‹ (LLM) æç¤ºäº¤äº’ä¸ä»£ç å’Œé¢†åŸŸæ¨¡å‹ç›¸ç»“åˆã€‚æ”¯æŒæ™ºèƒ½è·¯å¾„è§„åˆ’ä»¥å®ç°ç›®æ ‡ã€‚ä¸»è¦ä½¿ç”¨ Kotlin ç¼–å†™ï¼Œä½†ä¸º Java æä¾›äº†è‡ªç„¶çš„ä½¿ç”¨æ¨¡å¼ã€‚æ¥è‡ª Spring çš„åˆ›é€ è€…ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

æ™ºèƒ½ä½“æµç¨‹å»ºæ¨¡åŒ…å«ä»¥ä¸‹æ¦‚å¿µï¼š

- **åŠ¨ä½œ (Actions)**ï¼šæ™ºèƒ½ä½“æ‰§è¡Œçš„æ­¥éª¤
- **ç›®æ ‡ (Goals)**ï¼šæ™ºèƒ½ä½“è¯•å›¾å®ç°çš„ç›®æ ‡
- **æ¡ä»¶ (Conditions)**ï¼šåœ¨æ‰§è¡ŒåŠ¨ä½œæˆ–ç¡®å®šç›®æ ‡å·²å®ç°ä¹‹å‰éœ€è¦è¯„ä¼°çš„æ¡ä»¶ã€‚æ¡ä»¶ä¼šåœ¨æ¯ä¸ªåŠ¨ä½œæ‰§è¡Œåé‡æ–°è¯„ä¼°ã€‚
- **é¢†åŸŸæ¨¡å‹ (Domain model)**ï¼šæ”¯æ’‘æµç¨‹å¹¶ä¸ºåŠ¨ä½œã€ç›®æ ‡å’Œæ¡ä»¶æä¾›ä¿¡æ¯çš„å¯¹è±¡ã€‚
- **è®¡åˆ’ (Plan)**ï¼šå®ç°ç›®æ ‡çš„åŠ¨ä½œåºåˆ—ã€‚è®¡åˆ’ç”±ç³»ç»ŸåŠ¨æ€åˆ¶å®šï¼Œè€Œéç¨‹åºå‘˜ã€‚ç³»ç»Ÿä¼šåœ¨æ¯ä¸ªåŠ¨ä½œå®Œæˆåé‡æ–°è§„åˆ’ï¼Œä½¿å…¶èƒ½å¤Ÿé€‚åº”æ–°ä¿¡æ¯å¹¶è§‚å¯Ÿå‰ä¸€ä¸ªåŠ¨ä½œçš„æ•ˆæœã€‚è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ª [OODA å¾ªç¯](https://en.wikipedia.org/wiki/OODA_loop)ã€‚

> åº”ç”¨ç¨‹åºå¼€å‘è€…é€šå¸¸ä¸éœ€è¦ç›´æ¥å¤„ç†è¿™äº›æ¦‚å¿µï¼Œå› ä¸ºå¤§å¤šæ•°æ¡ä»¶æ¥è‡ªä»£ç ä¸­å®šä¹‰çš„æ•°æ®æµï¼Œå…è®¸ç³»ç»Ÿæ¨æ–­å‰ç½®å’Œåç½®æ¡ä»¶ã€‚

è¿™äº›æ¦‚å¿µæ”¯æ’‘äº†ç›¸æ¯”å…¶ä»–æ™ºèƒ½ä½“æ¡†æ¶çš„ä»¥ä¸‹å·®å¼‚åŒ–ç‰¹æ€§ï¼š

- **å¤æ‚è§„åˆ’**ï¼šè¶…è¶Šæœ‰é™çŠ¶æ€æœºæˆ–å¸¦åµŒå¥—çš„é¡ºåºæ‰§è¡Œï¼Œå¼•å…¥çœŸæ­£çš„è§„åˆ’æ­¥éª¤ï¼Œä½¿ç”¨é LLM çš„ AI ç®—æ³•ã€‚è¿™ä½¿ç³»ç»Ÿèƒ½å¤Ÿé€šè¿‡ä»¥æ–°é¢–çš„é¡ºåºç»„åˆå·²çŸ¥æ­¥éª¤æ¥æ‰§è¡Œæœªè¢«ç¼–ç¨‹çš„ä»»åŠ¡ï¼Œå¹¶åšå‡ºå…³äºå¹¶è¡ŒåŒ–å’Œå…¶ä»–è¿è¡Œæ—¶è¡Œä¸ºçš„å†³ç­–ã€‚
- **å“è¶Šçš„å¯æ‰©å±•æ€§å’Œé‡ç”¨æ€§**ï¼šç”±äºåŠ¨æ€è§„åˆ’ï¼Œæ·»åŠ æ›´å¤šé¢†åŸŸå¯¹è±¡ã€åŠ¨ä½œã€ç›®æ ‡å’Œæ¡ä»¶å¯ä»¥æ‰©å±•ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œ_æ— éœ€ç¼–è¾‘æœ‰é™çŠ¶æ€æœºå®šä¹‰_æˆ–ç°æœ‰ä»£ç ã€‚
- **å¼ºç±»å‹å’Œé¢å‘å¯¹è±¡çš„ä¼˜åŠ¿**ï¼šåŠ¨ä½œã€ç›®æ ‡å’Œæ¡ä»¶ç”±é¢†åŸŸæ¨¡å‹æä¾›ä¿¡æ¯ï¼Œé¢†åŸŸæ¨¡å‹å¯ä»¥åŒ…å«è¡Œä¸ºã€‚ä¸€åˆ‡éƒ½æ˜¯å¼ºç±»å‹çš„ï¼Œæç¤ºå’Œæ‰‹åŠ¨ç¼–å†™çš„ä»£ç å¯ä»¥æ¸…æ™°åœ°äº¤äº’ã€‚ä¸å†æœ‰ç¥å¥‡çš„æ˜ å°„ã€‚äº«å—å®Œæ•´çš„é‡æ„æ”¯æŒã€‚

å…¶ä»–ä¼˜åŠ¿ï¼š

- **å¹³å°æŠ½è±¡**ï¼šç¼–ç¨‹æ¨¡å‹å’Œå¹³å°å†…éƒ¨ä¹‹é—´çš„æ¸…æ™°åˆ†ç¦»å…è®¸åœ¨æœ¬åœ°è¿è¡Œï¼ŒåŒæ—¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯èƒ½æä¾›æ›´é«˜çš„æœåŠ¡è´¨é‡ï¼Œè€Œæ— éœ€æ›´æ”¹åº”ç”¨ç¨‹åºä»£ç ã€‚
- **ä¸º LLM æ··åˆè€Œè®¾è®¡**ï¼šè½»æ¾æ„å»ºæ··åˆ LLM çš„åº”ç”¨ç¨‹åºï¼Œç¡®ä¿æœ€å…·æˆæœ¬æ•ˆç›Šä¸”åŠŸèƒ½å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ä½¿ç³»ç»Ÿèƒ½å¤Ÿä¸ºä¸åŒä»»åŠ¡åˆ©ç”¨ä¸åŒæ¨¡å‹çš„ä¼˜åŠ¿ã€‚ç‰¹åˆ«æ˜¯ï¼Œå®ƒä¿ƒè¿›äº†å¯¹ç‰¹å®šä»»åŠ¡ä½¿ç”¨æœ¬åœ°æ¨¡å‹ã€‚è¿™å¯¹æˆæœ¬å’Œéšç§éƒ½å¾ˆé‡è¦ã€‚
- **åŸºäº Spring å’Œ JVM æ„å»º**ï¼Œä½¿å…¶æ˜“äºè®¿é—®ç°æœ‰çš„ä¼ä¸šåŠŸèƒ½å’Œèƒ½åŠ›ã€‚ä¾‹å¦‚ï¼š
    - Spring å¯ä»¥æ³¨å…¥å’Œç®¡ç†æ™ºèƒ½ä½“ï¼ŒåŒ…æ‹¬ä½¿ç”¨ Spring AOP è£…é¥°å‡½æ•°ã€‚
    - æä¾›å¼ºå¤§çš„æŒä¹…åŒ–å’Œäº‹åŠ¡ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚
- **ä»å¤´å¼€å§‹ä¸ºå¯æµ‹è¯•æ€§è€Œè®¾è®¡**ã€‚å•å…ƒæµ‹è¯•å’Œæ™ºèƒ½ä½“ç«¯åˆ°ç«¯æµ‹è¯•éƒ½å¾ˆå®¹æ˜“ã€‚

æµç¨‹å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€ç¼–å†™ï¼š

- ç±»ä¼¼äº Spring MVC çš„åŸºäºæ³¨è§£çš„æ¨¡å‹ï¼Œä½¿ç”¨ Spring æ„é€ å‹ `@Agent`ï¼Œä½¿ç”¨ `@Goal`ã€`@Condition` å’Œ `@Action` æ–¹æ³•ã€‚
- æƒ¯ç”¨çš„ Kotlin DSLï¼Œä½¿ç”¨ `agent {` å’Œ `action {` å—ã€‚

æ— è®ºå“ªç§æ–¹å¼ï¼Œæµç¨‹éƒ½ç”±å¯ä»¥å…·æœ‰ä¸°å¯Œè¡Œä¸ºçš„é¢†åŸŸæ¨¡å‹å¯¹è±¡æ”¯æŒã€‚

> æˆ‘ä»¬æ­£åœ¨åŠªåŠ›å…è®¸éƒ¨ç½²è‡ªç„¶è¯­è¨€åŠ¨ä½œå’Œç›®æ ‡ã€‚

è§„åˆ’æ­¥éª¤æ˜¯å¯æ’æ‹”çš„ã€‚

é»˜è®¤çš„è§„åˆ’æ–¹æ³•æ˜¯[ç›®æ ‡å¯¼å‘åŠ¨ä½œè§„åˆ’ (Goal Oriented Action Planning)](https://medium.com/@vedantchaudhari/goal-oriented-action-planning-34035ed40d0b)ã€‚GOAP æ˜¯æ¸¸æˆä¸­æµè¡Œçš„ AI è§„åˆ’ç®—æ³•ã€‚å®ƒå…è®¸åŸºäºä¸–ç•Œå½“å‰çŠ¶æ€å’Œæ™ºèƒ½ä½“ç›®æ ‡è¿›è¡ŒåŠ¨æ€å†³ç­–å’ŒåŠ¨ä½œé€‰æ‹©ã€‚

ç›®æ ‡ã€åŠ¨ä½œå’Œè®¡åˆ’ç‹¬ç«‹äº GOAPã€‚æœªæ¥çš„è§„åˆ’é€‰é¡¹åŒ…æ‹¬ï¼š

- ç”±æ¨ç†æ¨¡å‹ï¼ˆå¦‚ OpenAI o1 æˆ– DeepSeek R1ï¼‰åˆ›å»ºçš„è®¡åˆ’ã€‚

æ¡†æ¶é€šè¿‡ `AgentPlatform` å®ç°æ‰§è¡Œã€‚

æ™ºèƒ½ä½“å¹³å°æ”¯æŒä»¥ä¸‹æ‰§è¡Œæ¨¡å¼ï¼š

- **ä¸“æ³¨æ¨¡å¼ (Focused)**ï¼šç”¨æˆ·ä»£ç è¯·æ±‚ç‰¹å®šåŠŸèƒ½ï¼šç”¨æˆ·ä»£ç è°ƒç”¨æ–¹æ³•è¿è¡Œç‰¹å®šæ™ºèƒ½ä½“ï¼Œä¼ å…¥è¾“å…¥ã€‚è¿™å¯¹äºä»£ç é©±åŠ¨çš„æµç¨‹ï¼ˆå¦‚å“åº”ä¼ å…¥äº‹ä»¶è°ƒç”¨çš„æµç¨‹ï¼‰æ˜¯ç†æƒ³çš„ã€‚
- **å°é—­æ¨¡å¼ (Closed)**ï¼šç”¨æˆ·æ„å›¾ï¼ˆæˆ–å…¶ä»–ä¼ å…¥äº‹ä»¶ï¼‰è¢«åˆ†ç±»ä»¥é€‰æ‹©æ™ºèƒ½ä½“ã€‚å¹³å°å°è¯•åœ¨å…¶çŸ¥é“çš„æ‰€æœ‰æ™ºèƒ½ä½“ä¸­æ‰¾åˆ°åˆé€‚çš„æ™ºèƒ½ä½“ã€‚æ™ºèƒ½ä½“é€‰æ‹©æ˜¯åŠ¨æ€çš„ï¼Œä½†åªæœ‰åœ¨ç‰¹å®šæ™ºèƒ½ä½“å†…å®šä¹‰çš„åŠ¨ä½œæ‰ä¼šè¿è¡Œã€‚
- **å¼€æ”¾æ¨¡å¼ (Open)**ï¼šè¯„ä¼°ç”¨æˆ·æ„å›¾ï¼Œå¹³å°ä½¿ç”¨_æ‰€æœ‰_èµ„æºå°è¯•å®ç°å®ƒã€‚å¹³å°å°è¯•åœ¨å…¶çŸ¥é“çš„æ‰€æœ‰ç›®æ ‡ä¸­æ‰¾åˆ°åˆé€‚çš„ç›®æ ‡ï¼Œå¹¶ä»èµ·å§‹çŠ¶æ€æ„å»ºè‡ªå®šä¹‰æ™ºèƒ½ä½“æ¥å®ç°å®ƒï¼ŒåŒ…æ‹¬ç›¸å…³çš„åŠ¨ä½œå’Œæ¡ä»¶ã€‚å¦‚æœå¹³å°ä¸ç¡®ä¿¡ä»»ä½•ç›®æ ‡çš„é€‚ç”¨æ€§ï¼Œå®ƒå°†ä¸ä¼šç»§ç»­ã€‚`GoalChoiceApprover` æ¥å£ä¸ºå¼€å‘è€…æä¾›äº†è¿›ä¸€æ­¥é™åˆ¶ç›®æ ‡é€‰æ‹©çš„æ–¹æ³•ã€‚

å¼€æ”¾æ¨¡å¼æ˜¯æœ€å¼ºå¤§çš„ï¼Œä½†ç¡®å®šæ€§æœ€ä½ã€‚
> åœ¨å¼€æ”¾æ¨¡å¼ä¸‹ï¼Œå¹³å°èƒ½å¤Ÿæ‰¾åˆ°å¼€å‘è€…æœªé¢„è§çš„æ–°é¢–è·¯å¾„ï¼Œç”šè‡³ç»“åˆæ¥è‡ªå¤šä¸ªæä¾›è€…çš„åŠŸèƒ½ã€‚

å³ä½¿åœ¨å¼€æ”¾æ¨¡å¼ä¸‹ï¼Œå¹³å°ä¹Ÿåªä¼šæ‰§è¡Œå·²æŒ‡å®šçš„å•ä¸ªæ­¥éª¤ã€‚ï¼ˆå½“ç„¶ï¼Œæ­¥éª¤æœ¬èº«å¯èƒ½æ˜¯ LLM è½¬æ¢ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæç¤ºç”±ç”¨æˆ·ä»£ç æ§åˆ¶ï¼Œä½†ç»“æœä»ç„¶æ˜¯éç¡®å®šæ€§çš„ã€‚ï¼‰

å¯èƒ½çš„æœªæ¥æ¨¡å¼ï¼š

- **æ¼”è¿›æ¨¡å¼ (Evolving)**ï¼šå¹³å°å¯ä»¥åœ¨åŒä¸€è¿‡ç¨‹ä¸­å¤„ç†å¤šä¸ªç›®æ ‡ï¼Œå¹¶ä¿®æ”¹è¿è¡Œè¿‡ç¨‹ä»¥æ·»åŠ æ›´å¤šç›®æ ‡å’Œæ™ºèƒ½ä½“ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåŠ¨ä½œå¯ä»¥æ„è¯†åˆ°å®ç°é¢å¤–ç›®æ ‡å˜å¾—é‡è¦ã€‚

Embabel æ™ºèƒ½ä½“ç³»ç»Ÿè¿˜å°†æ”¯æŒè”é‚¦ï¼ŒåŒ…æ‹¬ä¸å…¶ä»– Embabel ç³»ç»Ÿï¼ˆå…è®¸è§„åˆ’åˆå¹¶è¿œç¨‹åŠ¨ä½œå’Œç›®æ ‡ï¼‰å’Œç¬¬ä¸‰æ–¹æ™ºèƒ½ä½“æ¡†æ¶çš„è”é‚¦ã€‚
## å¿«
é€Ÿå¼€å§‹

åœ¨ 5 åˆ†é’Ÿå†…è¿è¡Œæ™ºèƒ½ä½“ã€‚

ä»æˆ‘ä»¬çš„ [Java](https://github.com/embabel/java-agent-template) æˆ– [Kotlin](https://github.com/embabel/kotlin-agent-template) GitHub æ¨¡æ¿åˆ›å»ºæ‚¨è‡ªå·±çš„æ™ºèƒ½ä½“ä»“åº“ï¼Œç‚¹å‡»"ä½¿ç”¨æ­¤æ¨¡æ¿"æŒ‰é’®ã€‚

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„å¿«é€Ÿå¼€å§‹å·¥å…·åœ¨æœ¬åœ°åˆ›å»ºè‡ªå·±çš„ Embabel æ™ºèƒ½ä½“é¡¹ç›®ï¼š

```
uvx --from git+https://github.com/embabel/project-creator.git project-creator
```

é€‰æ‹© Java æˆ– Kotlinï¼ŒæŒ‡å®šæ‚¨çš„é¡¹ç›®åç§°å’ŒåŒ…åç§°ï¼Œå¦‚æœæ‚¨å·²ç»æœ‰ `OPENAI_API_KEY` å¹¶å®‰è£…äº† Mavenï¼Œæ‚¨å°†åœ¨ä¸€åˆ†é’Ÿå†…è¿è¡Œæ™ºèƒ½ä½“ã€‚

> **ğŸ“š ç¤ºä¾‹å’Œæ•™ç¨‹**ï¼Œè¯·å‚é˜… [Embabel æ™ºèƒ½ä½“ç¤ºä¾‹ä»“åº“](https://github.com/embabel/embabel-agent-examples)

> **ğŸš— å®é™…åº”ç”¨ç¤ºä¾‹**ï¼Œè¯·å‚é˜… [Tripper æ—…è¡Œè§„åˆ’æ™ºèƒ½ä½“](https://github.com/embabel/tripper)

## ä¸ºä»€ä¹ˆéœ€è¦ Embabelï¼Ÿ

ç®€è€Œè¨€ä¹‹ï¼šå› ä¸ºæ™ºèƒ½ä½“æ¡†æ¶çš„æ¼”è¿›è¿˜å¤„äºæ—©æœŸé˜¶æ®µï¼Œæœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´ï¼›å› ä¸º JVM ä¸Šçš„æ™ºèƒ½ä½“æ¡†æ¶å°†æä¾›å·¨å¤§çš„å•†ä¸šä»·å€¼ã€‚

- _ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ™ºèƒ½ä½“æ¡†æ¶ï¼Ÿ_ æˆ‘ä»¬å¯ä»¥åœ¨æ²¡æœ‰æ›´é«˜çº§æŠ½è±¡çš„æƒ…å†µä¸‹ç¼–å†™ä»£ç ï¼Œç›´æ¥è°ƒç”¨ LLM å¹¶åœ¨ä»£ç ä¸­ç›´æ¥æ§åˆ¶æµç¨‹ã€‚ç„¶è€Œï¼Œæ›´é«˜çº§çš„æ™ºèƒ½ä½“æ¡†æ¶æä¾›äº†ä»¤äººä¿¡æœçš„å¥½å¤„ã€‚ä¾‹å¦‚ï¼š
    - åˆ†è§£ LLM äº¤äº’ï¼Œä½¿å…¶æ›´ç®€å•ã€æ›´ä¸“æ³¨ã€‚è¿™æœ€å¤§åŒ–äº†é‡ç”¨æ€§ï¼Œæœ€å°åŒ–äº†æˆæœ¬å’Œé”™è¯¯ã€‚å®ƒé€šå¸¸å…è®¸æˆ‘ä»¬ä¸ºç‰¹å®šäº¤äº’ä½¿ç”¨æ›´ä¾¿å®œçš„æ¨¡å‹ã€‚
    - ä¿ƒè¿›å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œè¿™å¯¹æ™ºèƒ½ä½“ç³»ç»Ÿå’Œä»»ä½•å…¶ä»–è½¯ä»¶ç³»ç»Ÿä¸€æ ·é‡è¦ã€‚
    - å¢åŠ å¯ç»„åˆæ€§ï¼Œå­æµç¨‹å’Œå•ä¸ªåŠ¨ä½œå¯ä»¥é‡ç”¨
    - ä½¿åº”ç”¨ç¨‹åºæ›´æ˜“ç®¡ç†å’Œå¥å£®ï¼Œä½¿å·¥ä½œæµç®¡ç†å™¨èƒ½å¤Ÿæ§åˆ¶å…¶æ‰§è¡Œå¹¶é‡è¯•æ“ä½œï¼ŒåŒæ—¶ä¿æŒå…ˆå‰çŠ¶æ€
    - é€šè¿‡åœ¨è®¸å¤šåœ°æ–¹åº”ç”¨æŠ¤æ æ¥å¢å¼ºå®‰å…¨æ€§
- _å½“ Python ä¸­å­˜åœ¨è§£å†³æ–¹æ¡ˆæ—¶ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ JVM çš„æ™ºèƒ½ä½“æ¡†æ¶ï¼Ÿ_ï¼šè™½ç„¶è¿™ä¸ªé¢†åŸŸç›®å‰åœ¨ Pythonï¼ˆç”šè‡³ TypeScriptï¼‰ä¸­å‘å±•å¾—æ›´å¥½ï¼Œä½†å®ƒè¿˜å¤„äºæ—©æœŸé˜¶æ®µï¼Œæœ‰å¾ˆå¤§çš„ç©ºé—´ç”¨äºæ–°é¢–ä¸”å¯èƒ½æ›´ä¼˜ç§€çš„æ–¹æ³•ã€‚å…³é”®çš„é‚»æ¥æ€§é€šå¸¸ä¸æ˜¯ LLMâ€”â€”å®ƒåªæ˜¯ä¸€ä¸ªç®€å•çš„ HTTP è°ƒç”¨â€”â€”è€Œæ˜¯ç°æœ‰çš„ä»£ç å’ŒåŸºç¡€è®¾æ–½èµ„äº§ï¼Œè¿™äº›æ›´å¯èƒ½åœ¨ JVM ä¸Šè€Œä¸æ˜¯åœ¨ Python ä¸­ã€‚
- _ä¸ºä»€ä¹ˆä¸åªä½¿ç”¨ Spring AIï¼Ÿ_ Spring AI å¾ˆæ£’ã€‚æˆ‘ä»¬åŸºäºå®ƒæ„å»ºï¼Œå¹¶æ‹¥æŠ± Spring ç»„ä»¶æ¨¡å‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ç›¸ä¿¡å¤§å¤šæ•°åº”ç”¨ç¨‹åºåº”è¯¥ä½¿ç”¨æ›´é«˜çº§çš„ APIã€‚ä¸€ä¸ªç±»æ¯”ï¼šSpring AI å­˜åœ¨äº Servlet API çš„çº§åˆ«ï¼Œè€Œ Embabel æ›´åƒ Spring MVCã€‚å¤æ‚çš„éœ€æ±‚åœ¨ Embabel ä¸­æ¯”ç›´æ¥ä½¿ç”¨ Spring AI æ›´å®¹æ˜“è¡¨è¾¾å’Œæµ‹è¯•ã€‚
- _ä¸ºä»€ä¹ˆä¸å°è¯•å°†æ­¤é¡¹ç›®è´¡çŒ®ç»™ Springï¼Ÿ_ æ­¤é¡¹ç›®éœ€è¦ä¸ Spring ä¸åŒçš„æ²»ç†ï¼ŒSpring ä¸­çš„å¤§å¤šæ•°é¡¹ç›®å­˜åœ¨äºç¨³å®šç¯å¢ƒä¸­ï¼Œå¯é æ€§å’Œç¨³å®šæ€§èƒœè¿‡å¿«é€Ÿåˆ›æ–°ã€‚å…¶æ¬¡ï¼Œè¿™äº›æ¦‚å¿µä¸æ˜¯ JVM ç‰¹å®šçš„ã€‚æˆ‘ä»¬å¸Œæœ› Embabel æˆä¸ºè·¨å¹³å°çš„é¢†å…ˆæ™ºèƒ½ä½“æ¡†æ¶ã€‚è™½ç„¶ Spring å“ç‰Œåœ¨ Java ä¸­å¾ˆæœ‰ä»·å€¼ï¼Œä½†åœ¨ TypeScript æˆ– Python ä¸­å¹¶éå¦‚æ­¤ã€‚

## å±•ç¤ºä»£ç 

åœ¨ Kotlin æˆ– Java ä¸­ï¼Œæ™ºèƒ½ä½“å®ç°ä»£ç ç›´è§‚ä¸”æ˜“äºæµ‹è¯•ã€‚

```kotlin
@Agent(description = "æ ¹æ®ä¸€ä¸ªäººçš„æ˜Ÿåº§å¯»æ‰¾æ–°é—»")
class StarNewsFinder(
    // åƒ Horoscope è¿™æ ·çš„æœåŠ¡ä½¿ç”¨ Spring æ³¨å…¥
    private val horoscopeService: HoroscopeService,
    private val storyCount: Int = 5,
) {

    @Action
    fun extractPerson(userInput: UserInput): StarPerson =
        // æ‰€æœ‰æç¤ºéƒ½æ˜¯ç±»å‹å®‰å…¨çš„
        PromptRunner().createObject("ä»æ­¤ç”¨æˆ·è¾“å…¥åˆ›å»ºä¸€ä¸ªäººï¼Œæå–ä»–ä»¬çš„å§“åå’Œæ˜Ÿåº§ï¼š$userInput")

    @Action
    fun retrieveHoroscope(starPerson: StarPerson) =
        Horoscope(horoscopeService.dailyHoroscope(starPerson.sign))

    // toolGroups æŒ‡å®šæ­¤åŠ¨ä½œè¿è¡Œæ‰€éœ€çš„å·¥å…·
    @Action(toolGroups = [ToolGroup.WEB])
    fun findNewsStories(person: StarPerson, horoscope: Horoscope): RelevantNewsStories =
        PromptRunner().createObject(
            """
            ${person.name} æ˜¯ä¸€ä¸ªç›¸ä¿¡å æ˜Ÿæœ¯çš„äººï¼Œæ˜Ÿåº§æ˜¯ ${person.sign}ã€‚
            ä»–ä»¬ä»Šå¤©çš„æ˜Ÿåº§è¿åŠ¿æ˜¯ï¼š
                <horoscope>${horoscope.summary}</horoscope>
            åŸºäºæ­¤ï¼Œä½¿ç”¨ç½‘ç»œå·¥å…·å¹¶ç”Ÿæˆæœç´¢æŸ¥è¯¢
            æ‰¾åˆ° $storyCount ä¸ªç›¸å…³æ–°é—»æ•…äº‹ï¼Œç”¨å‡ å¥è¯æ€»ç»“å®ƒä»¬ã€‚
            åŒ…å«æ¯ä¸ªæ•…äº‹çš„ URLã€‚
            ä¸è¦å¯»æ‰¾å¦ä¸€ä¸ªæ˜Ÿåº§è¿åŠ¿é˜…è¯»æˆ–ç›´æ¥è¿”å›å…³äºå æ˜Ÿæœ¯çš„ç»“æœï¼›
            æ‰¾åˆ°ä¸ä¸Šè¿°é˜…è¯»ç›¸å…³çš„æ•…äº‹ã€‚

            ä¾‹å¦‚ï¼š
            - å¦‚æœæ˜Ÿåº§è¿åŠ¿è¯´ä»–ä»¬å¯èƒ½
            æƒ³è¦æ”¹å–„å…³ç³»ï¼Œä½ å¯ä»¥æ‰¾åˆ°å…³äº
            æ–°é¢–ç¤¼ç‰©çš„æ–°é—»æ•…äº‹
            - å¦‚æœæ˜Ÿåº§è¿åŠ¿è¯´ä»–ä»¬å¯èƒ½æƒ³è¦æ”¹å–„èŒä¸šï¼Œ
            æ‰¾åˆ°å…³äºåŸ¹è®­è¯¾ç¨‹çš„æ–°é—»æ•…äº‹ã€‚
        """.trimIndent()
        )

    // @AchievesGoal æ³¨è§£è¡¨ç¤ºå®Œæˆæ­¤åŠ¨ä½œ
    // å®ç°äº†ç»™å®šç›®æ ‡ï¼Œå› æ­¤æ™ºèƒ½ä½“è¿è¡Œå°†å®Œæˆ
    @AchievesGoal(
        description = "åŸºäºç›®æ ‡äººå‘˜çš„æ˜Ÿåº§è¿åŠ¿å’Œå½“å‰æ–°é—»æ•…äº‹ä¸ºå…¶å†™ä¸€ä¸ªæœ‰è¶£çš„æ–‡ç« ",
    )
    @Action
    fun writeup(
        person: StarPerson,
        relevantNewsStories: RelevantNewsStories,
        horoscope: Horoscope,
    ): Writeup =
        // è‡ªå®šä¹‰ LLM è°ƒç”¨
        PromptRunner().withTemperature(1.2).createObject(
            """
            å–ä»¥ä¸‹æ–°é—»æ•…äº‹å¹¶ä¸ºç›®æ ‡äººå‘˜å†™ä¸€äº›
            æœ‰è¶£çš„å†…å®¹ã€‚

            é¦–å…ˆä»¥ç®€æ´ã€æœ‰è¶£çš„æ–¹å¼æ€»ç»“ä»–ä»¬çš„æ˜Ÿåº§è¿åŠ¿ï¼Œç„¶å
            è°ˆè®ºæ–°é—»ã€‚ä»¥ä»¤äººæƒŠè®¶çš„ç­¾åç»“æŸã€‚

            ${person.name} æ˜¯ä¸€ä¸ªç›¸ä¿¡å æ˜Ÿæœ¯çš„äººï¼Œæ˜Ÿåº§æ˜¯ ${person.sign}ã€‚
            ä»–ä»¬ä»Šå¤©çš„æ˜Ÿåº§è¿åŠ¿æ˜¯ï¼š
                <horoscope>${horoscope.summary}</horoscope>
            ç›¸å…³æ–°é—»æ•…äº‹æ˜¯ï¼š
            ${relevantNewsStories.items.joinToString("\n") { "- ${it.url}: ${it.summary}" }}

            å°†å…¶æ ¼å¼åŒ–ä¸ºå¸¦é“¾æ¥çš„ Markdownã€‚
        """.trimIndent()
        )

}
```

ä»¥ä¸‹é¢†åŸŸç±»ç¡®ä¿ç±»å‹å®‰å…¨ï¼š

```kotlin
data class RelevantNewsStories(
    val items: List<NewsStory>
)

data class NewsStory(
    val url: String,

    val summary: String,
)

data class Subject(
    val name: String,
    val sign: String,
)

data class Horoscope(
    val summary: String,
)

data class FunnyWriteup(
    override val text: String,
) : HasContent
```

## ç‹—ç²®æ”¿ç­–

æˆ‘ä»¬ç›¸ä¿¡è½¯ä»¶å¼€å‘çš„æ‰€æœ‰æ–¹é¢éƒ½å¯ä»¥è€Œä¸”åº”è¯¥é€šè¿‡ä½¿ç”¨ AI æ™ºèƒ½ä½“å¤§å¤§åŠ é€Ÿã€‚æœ€ç»ˆå†³ç­–è€…ä»ç„¶æ˜¯äººç±»ï¼Œä½†ä»–ä»¬å¯ä»¥è€Œä¸”åº”è¯¥å¾—åˆ°å¤§å¤§å¢å¼ºã€‚

> æ­¤é¡¹ç›®å®è·µæç«¯ç‹—ç²®æ”¿ç­–ã€‚

<!-- TODO photo of Duke with kibble -->

æˆ‘ä»¬çš„å…³é”®åŸåˆ™ï¼š

1. **æˆ‘ä»¬å°†ä½¿ç”¨ AI æ™ºèƒ½ä½“å¸®åŠ©é¡¹ç›®çš„æ¯ä¸ªæ–¹é¢ï¼š** ç¼–ç ã€æ–‡æ¡£ã€åˆ¶ä½œè¥é”€æ–‡æ¡ˆç­‰ã€‚ä»»ä½•æ‰§è¡Œä»»åŠ¡çš„äººéƒ½åº”è¯¥é—®ä¸ºä»€ä¹ˆå®ƒä¸èƒ½è‡ªåŠ¨åŒ–ï¼Œå¹¶åŠªåŠ›å®ç°æœ€å¤§è‡ªåŠ¨åŒ–ã€‚
2. **å¼€å‘è€…ä¿ç•™æœ€ç»ˆæ§åˆ¶æƒã€‚** å¼€å‘è€…è´Ÿè´£æŒ‡å¯¼æ™ºèƒ½ä½“æœå‘è§£å†³æ–¹æ¡ˆå¹¶æ ¹æ®éœ€è¦è¿­ä»£ã€‚æäº¤æˆ–åˆå¹¶æ™ºèƒ½ä½“è´¡çŒ®çš„å¼€å‘è€…è´Ÿè´£ç¡®ä¿å®ƒç¬¦åˆé¡¹ç›®ç¼–ç æ ‡å‡†ï¼Œè¿™äº›æ ‡å‡†ç‹¬ç«‹äºæ™ºèƒ½ä½“çš„ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä»£ç å¿…é¡»æ˜¯äººç±»å¯è¯»çš„ã€‚
3. **æˆ‘ä»¬å°†åªä½¿ç”¨åŸºäº Embabel å¹³å°æ„å»ºçš„å¼€æºæ™ºèƒ½ä½“**ï¼Œå¹¶è´¡çŒ®ä»»ä½•æ”¹è¿›ã€‚è™½ç„¶å•†ä¸šç¼–ç æ™ºèƒ½ä½“å¯èƒ½æ›´å…ˆè¿›ï¼Œä½†æˆ‘ä»¬ç›¸ä¿¡æˆ‘ä»¬çš„å¹³å°æ˜¯è‡ªåŠ¨åŒ–çš„æœ€ä½³é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ç‹—ç²®æ”¿ç­–æˆ‘ä»¬å°†æœ€å¿«åœ°æ”¹è¿›å®ƒã€‚é€šè¿‡å¼€æºç”¨äºæˆ‘ä»¬å¼€æºé¡¹ç›®çš„æ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬å°†æœ€å¤§åŒ–å¯¹ç¤¾åŒºçš„å¥½å¤„ã€‚
4. **æˆ‘ä»¬å°†ä¼˜å…ˆè€ƒè™‘å¸®åŠ©åŠ é€Ÿæˆ‘ä»¬è¿›å±•çš„æ™ºèƒ½ä½“ã€‚** æ ¹æ®é£è¡Œå®‰å…¨å»ºè®®ï¼Œåœ¨å¸®åŠ©ä»–äººä¹‹å‰å…ˆæˆ´ä¸Šè‡ªå·±çš„é¢ç½©ï¼Œæˆ‘ä»¬å°†ä¼˜å…ˆè€ƒè™‘å¸®åŠ©æˆ‘ä»¬åŠ é€Ÿè‡ªå·±è¿›å±•çš„æ™ºèƒ½ä½“ã€‚è¿™ä¸ä»…ä¼šäº§ç”Ÿæœ‰ç”¨çš„ç¤ºä¾‹ï¼Œè¿˜ä¼šå¢åŠ æ•´ä½“é¡¹ç›®é€Ÿåº¦ã€‚

å¼€å‘è€…å¿…é¡»ä»”ç»†é˜…è¯»ä»–ä»¬æäº¤çš„æ‰€æœ‰ä»£ç ï¼Œå¹¶åœ¨å¯èƒ½çš„æƒ…å†µä¸‹æ”¹è¿›ç”Ÿæˆçš„ä»£ç ã€‚## å…¥
é—¨æŒ‡å—

- è·å–ä»£ç 
- è®¾ç½®ç¯å¢ƒ
- è¿è¡Œåº”ç”¨ç¨‹åº

### è·å–ä»£ç 

é€‰æ‹©ä»¥ä¸‹ä¹‹ä¸€ï¼š

- é€šè¿‡ `git clone https://github.com/embabel/embabel-agent` å…‹éš†ä»“åº“
- åˆ›å»ºæ–°çš„ Spring Boot é¡¹ç›®å¹¶æ·»åŠ å¿…è¦çš„ä¾èµ–é¡¹ï¼ˆè¯·å‚é˜…ä¸‹é¢çš„"åœ¨æ‚¨çš„é¡¹ç›®ä¸­ä½¿ç”¨ Embabel æ™ºèƒ½ä½“æ¡†æ¶"ï¼‰

### ç¯å¢ƒå˜é‡

> ç¯å¢ƒå˜é‡ä¸å¸¸è§ç”¨æ³•ä¸€è‡´ï¼Œè€Œä¸æ˜¯ Spring AIã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ›´å–œæ¬¢ `OPENAI_API_KEY` è€Œä¸æ˜¯ `SPRING_AI_OPENAI_API_KEY`ã€‚

å¿…éœ€ï¼š

- `OPENAI_API_KEY`ï¼šç”¨äº OpenAI API

å¯é€‰ï¼š

- `ANTHROPIC_API_KEY`ï¼šç”¨äº Anthropic APIã€‚ç¼–ç æ™ºèƒ½ä½“éœ€è¦ã€‚

> æˆ‘ä»¬å¼ºçƒˆå»ºè®®æä¾› OpenAI å’Œ Anthropic å¯†é’¥ï¼Œå› ä¸ºä¸€äº›ç¤ºä¾‹éœ€è¦ä¸¤è€…ã€‚ä¸ºç»™å®šä»»åŠ¡å°è¯•æ‰¾åˆ°æœ€ä½³ LLM å¾ˆé‡è¦ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨é€‰æ‹©ç†Ÿæ‚‰çš„æä¾›å•†ã€‚

### æœåŠ¡

æ‚¨éœ€è¦å®‰è£…äº† Docker MCP æ‰©å±•çš„ Docker Desktopï¼Œç”¨äº Docker MCP å·¥å…·ï¼Œå¦‚ç½‘ç»œæœç´¢å·¥å…·ã€‚ç¡®ä¿ä»ç›®å½•ä¸­æ¿€æ´»ä»¥ä¸‹å·¥å…·ï¼š

- Brave Search
- Fetch
- Puppeteer
- Wikipedia

> æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ Spring AI çº¦å®šè®¾ç½®è‡ªå·±çš„ MCP å·¥å…·ã€‚è¯·å‚é˜… `application-docker-desktop.yml` æ–‡ä»¶ä½œä¸ºç¤ºä¾‹ã€‚

å¦‚æœæ‚¨åœ¨æœ¬åœ°è¿è¡Œ Ollamaï¼Œè®¾ç½® `ollama` é…ç½®æ–‡ä»¶ï¼ŒEmbabel å°†è‡ªåŠ¨è¿æ¥åˆ°æ‚¨çš„ Ollama ç«¯ç‚¹å¹¶ä½¿æ‰€æœ‰æ¨¡å‹å¯ç”¨ã€‚

### è¿è¡Œ

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ‚¨è‡ªå·±çš„æ™ºèƒ½ä½“é¡¹ç›®ï¼š

```
uvx --from git+https://github.com/embabel/project-creator.git project-creator
```

### ç¤ºä¾‹æ™ºèƒ½ä½“

> **ğŸ“š ç¤ºä¾‹å’Œæ•™ç¨‹**ï¼Œè¯·å‚é˜… [Embabel æ™ºèƒ½ä½“ç¤ºä¾‹ä»“åº“](https://github.com/embabel/embabel-agent-examples)

```bash
# å…‹éš†å¹¶è¿è¡Œç¤ºä¾‹
git clone https://github.com/embabel/embabel-agent-examples
cd embabel-agent-examples/scripts/kotlin
./shell.sh
```

#### Shell å‘½ä»¤

è¾“å…¥ `help` æŸ¥çœ‹å¯ç”¨å‘½ä»¤ã€‚ç¤ºä¾‹ï¼š

```
execute "Lynda is a Scorpio, find news for her" -p -r
```

é€‰é¡¹ï¼š

- `-p` è®°å½•æç¤º
- `-r` è®°å½• LLM å“åº”

ä½¿ç”¨ `chat` ä¸æ™ºèƒ½ä½“è¿›è¡Œäº¤äº’å¼å¯¹è¯ã€‚

> **æç¤ºï¼š** Spring Shell æ”¯æŒå†å²è®°å½• - è¾“å…¥ `!!` é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤

è¾“å…¥ `help` æŸ¥çœ‹å¯ç”¨å‘½ä»¤ã€‚

ç¤ºä¾‹ï¼š

```
execute "Lynda is a Scorpio, find news for her" -p -r
```

è¿™å°†å¯»æ‰¾æ™ºèƒ½ä½“ï¼Œé€‰æ‹©æ˜Ÿåº§æŸ¥æ‰¾æ™ºèƒ½ä½“å¹¶è¿è¡Œæµç¨‹ã€‚`-p` å°†è®°å½•æç¤ºï¼Œ`-r` å°†è®°å½• LLM å“åº”ã€‚çœç•¥è¿™äº›ä»¥å‡å°‘è¯¦ç»†æ—¥å¿—è®°å½•ã€‚

ä½¿ç”¨ `chat` å‘½ä»¤è¿›å…¥ä¸æ™ºèƒ½ä½“çš„äº¤äº’å¼èŠå¤©ã€‚å®ƒå°†ä¿ç•™å¯¹è¯å†å²ï¼Œå¹¶å°è¯•ä¸ºæ¯ä¸ªå‘½ä»¤è¿è¡Œæœ€åˆé€‚çš„æ™ºèƒ½ä½“ã€‚

> Spring Shell æ”¯æŒå†å²è®°å½•ã€‚è¾“å…¥ `!!` é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤ã€‚è¿™å°†åœ¨é‡å¯åä¿ç•™ï¼Œå› æ­¤åœ¨è¿­ä»£æ™ºèƒ½ä½“æ—¶å¾ˆæ–¹ä¾¿ã€‚

#### æ›´å¤šç¤ºä¾‹

Shell å†…çš„ç¤ºä¾‹å‘½ä»¤ï¼š

```
# Perplexity é£æ ¼çš„æ·±åº¦ç ”ç©¶
# éœ€è¦ OpenAI å’Œ Anthropic å¯†é’¥ä»¥åŠå¸¦æœ‰ MCP æ‰©å±•çš„ Docker Desktopï¼ˆæˆ–æ‚¨è‡ªå·±çš„ç½‘ç»œå·¥å…·ï¼‰
execute "research the recent australian federal election. what is the position of the greens party?"

# x æ˜¯ execute çš„å¿«æ·æ–¹å¼
x "fact check the following: holden cars are still made in australia; the koel is a bird native only to australia; fidel castro is justin trudeau's father"

```

å°è¯• [ç¼–ç æ™ºèƒ½ä½“](https://www.github.com/embabel/embabel-coding-agent)ï¼ˆå•ç‹¬çš„ä»“åº“ï¼‰ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

```

x "explain this project for a five your old"

x "take the StarNewsFinder kotlin example of the agent framework. create a parallel .java package beside its and create a java version of the same agent use the same annotations and other classes. use records for the data classes. make it modern java"

x "consider the StarNewsFinder kotlin class. This is intended as an example. Is there anything you could do to make it simpler? Include suggested API changes. Do not change code"
```

### å¼•å…¥å…¶ä»– LLM

#### çŸ¥åæä¾›å•†çš„æœ¬åœ°æ¨¡å‹

Embabel æ™ºèƒ½ä½“æ¡†æ¶æ”¯æŒæ¥è‡ªä»¥ä¸‹æä¾›å•†çš„æœ¬åœ°æ¨¡å‹ï¼š

- Ollamaï¼šåªéœ€è®¾ç½® `ollama` é…ç½®æ–‡ä»¶ï¼Œæ‚¨çš„æœ¬åœ° Ollama ç«¯ç‚¹å°†è¢«æŸ¥è¯¢ã€‚æ‰€æœ‰æœ¬åœ°æ¨¡å‹éƒ½å°†å¯ç”¨ã€‚
- Dockerï¼šè®¾ç½® `docker` é…ç½®æ–‡ä»¶ï¼Œæ‚¨çš„æœ¬åœ° Docker ç«¯ç‚¹å°†è¢«æŸ¥è¯¢ã€‚æ‰€æœ‰æœ¬åœ°æ¨¡å‹éƒ½å°†å¯ç”¨ã€‚

#### è‡ªå®šä¹‰ LLM

æ‚¨å¯ä»¥ä¸ºä»»ä½•æœ‰ Spring AI `ChatModel` å¯ç”¨çš„æä¾›å•†å®šä¹‰ LLMã€‚

åªéœ€å®šä¹‰ `Llm` ç±»å‹çš„ Spring beanã€‚è¯·å‚é˜… `OpenAiConfiguration` ç±»ä½œä¸ºç¤ºä¾‹ã€‚

è®°ä½ï¼š

- å¦‚æœæ‚¨çŸ¥é“çŸ¥è¯†æˆªæ­¢æ—¥æœŸï¼Œè¯·æä¾›
- ä½¿é…ç½®ç±»åœ¨ä»»ä½•å¿…éœ€çš„ API å¯†é’¥ä¸Šæœ‰æ¡ä»¶ã€‚

## è·¯çº¿å›¾

æ­¤é¡¹ç›®å¤„äºæ—©æœŸé˜¶æ®µï¼Œä½†æˆ‘ä»¬æœ‰å®å¤§çš„è®¡åˆ’ã€‚æ­¤ä»“åº“ä¸­çš„é‡Œç¨‹ç¢‘å’Œé—®é¢˜æ˜¯å¾ˆå¥½çš„å‚è€ƒã€‚æˆ‘ä»¬çš„å…³é”®ç›®æ ‡ï¼š

- **æˆä¸º Gen AI å¯ç”¨ Java åº”ç”¨ç¨‹åºçš„è‡ªç„¶æ–¹å¼**ï¼Œç‰¹åˆ«æ˜¯é‚£äº›åŸºäº Spring æ„å»ºçš„åº”ç”¨ç¨‹åºã€‚
- **è¯æ˜æ¨¡å‹çš„åŠ›é‡**ã€‚è¯æ˜æ­¤æ¨¡å‹æ˜¯æœ€æœ‰èƒ½åŠ›çš„æ™ºèƒ½ä½“æ¨¡å‹ã€‚è¯·å‚é˜… [Dunnart é‡Œç¨‹ç¢‘](https://github.com/embabel/embabel-agent/milestone/4) äº†è§£è¯¦æƒ…ã€‚ç‰¹åˆ«æ˜¯ï¼š
    - é€šè¿‡æ·»åŠ ç›®æ ‡å’ŒåŠ¨ä½œæ¥è¯æ˜æ— éœ€ä¿®æ”¹çš„å¯æ‰©å±•æ€§çš„åŠ›é‡
    - è¯æ˜æˆä¸ºè‡ªç„¶è¯­è¨€ PaaS çš„æ½œåŠ›
    - è¯æ˜ GOAP æ¨¡å‹å†…æ™ºèƒ½ä½“è”é‚¦çš„æ½œåŠ›
    - è¯æ˜é¢„ç®—æ„ŸçŸ¥æ™ºèƒ½ä½“çš„æ½œåŠ›ï¼Œå¦‚"ç ”ç©¶ä»¥ä¸‹ä¸»é¢˜ï¼Œå¦‚æœæ‚¨ä»åœ¨å­¦ä¹ ï¼ŒèŠ±è´¹æœ€å¤š 20 ç¾åˆ†"
    - ä¸æ•°æ®å­˜å‚¨é›†æˆå¹¶è¯æ˜åœ¨ç»„ç»‡å†…å±•ç°ç°æœ‰åŠŸèƒ½çš„åŠ›é‡
- **å°†æ¨¡å‹å¸¦åˆ°å…¶ä»–å¹³å°**ï¼šæ¦‚å¿µæ¡†æ¶ä¸æ˜¯ JVM ç‰¹å®šçš„ã€‚ä¸€æ—¦å»ºç«‹ï¼Œæˆ‘ä»¬æ‰“ç®—åˆ›å»º TypeScript å’Œ Python é¡¹ç›®ã€‚

æœ‰å¾ˆå¤šå·¥ä½œè¦åšï¼Œæ‚¨å¾ˆæ£’ã€‚æˆ‘ä»¬æœŸå¾…æ‚¨çš„è´¡çŒ®ï¼

## åº”ç”¨ç¨‹åºè®¾è®¡

### é¢†åŸŸå¯¹è±¡

åº”ç”¨ç¨‹åºä»¥é¢†åŸŸå¯¹è±¡ä¸ºä¸­å¿ƒã€‚è¿™äº›å¯ä»¥ç”± LLM æˆ–ç”¨æˆ·ä»£ç å®ä¾‹åŒ–ï¼Œå¹¶ç”±ç”¨æˆ·ä»£ç æ“ä½œã€‚

ä½¿ç”¨ Jackson æ³¨è§£å¸®åŠ© LLM æè¿°ä»¥åŠæ ‡è®°è¦å¿½ç•¥çš„å­—æ®µã€‚ä¾‹å¦‚ï¼š

```kotlin
@JsonClassDescription("å…·æœ‰å æ˜Ÿæœ¯è¯¦ç»†ä¿¡æ¯çš„äºº")
data class StarPerson(
    override val name: String,
    @get:JsonPropertyDescription("æ˜Ÿåº§")
    val sign: String,
) : Person
```

è¯·å‚é˜… [Java Json Schema Generation - Module Jackson](https://github.com/victools/jsonschema-generator/tree/main/jsonschema-module-jackson) äº†è§£æ‰€ç”¨åº“çš„æ–‡æ¡£ã€‚

é¢†åŸŸå¯¹è±¡å¯ä»¥å…·æœ‰åœ¨ä½œç”¨åŸŸå†…æ—¶è‡ªåŠ¨æš´éœ²ç»™ LLM çš„è¡Œä¸ºã€‚åªéœ€ä½¿ç”¨ Spring AI `@Tool` æ³¨è§£æ ‡æ³¨æ–¹æ³•ã€‚

> åœ¨é¢†åŸŸå¯¹è±¡ä¸Šæš´éœ² `@Tool` æ–¹æ³•æ—¶ï¼Œç¡®ä¿å·¥å…·è°ƒç”¨æ˜¯å®‰å…¨çš„ã€‚å³ä½¿æ˜¯æœ€å¥½çš„ LLM ä¹Ÿå¯èƒ½è¿‡äºæ¿€è¿›ã€‚ä¾‹å¦‚ï¼Œå°å¿ƒå¯èƒ½æ”¹å˜æˆ–åˆ é™¤æ•°æ®çš„æ–¹æ³•ã€‚è¿™å¯èƒ½æ›´å¥½åœ°é€šè¿‡åœ¨åŒä¸€é¢†åŸŸç±»ä¸Šæ˜¾å¼è°ƒç”¨éå·¥å…·æ–¹æ³•åœ¨ä»£ç åŠ¨ä½œä¸­å»ºæ¨¡ã€‚

## å°† Embabel ç”¨ä½œ MCP æœåŠ¡å™¨

æ‚¨å¯ä»¥ä»åƒ Claude Desktop è¿™æ ·çš„ UI å°† Embabel æ™ºèƒ½ä½“å¹³å°ç”¨ä½œ MCP æœåŠ¡å™¨ã€‚Embabel MCP æœåŠ¡å™¨é€šè¿‡ SSE å¯ç”¨ã€‚

åœ¨æ‚¨çš„ `claude-desktop.yml` ä¸­å¦‚ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "embabel": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "http://localhost:8080/sse"
      ]
    }
  }
}


```

*æ³¨æ„ï¼š* æ­¤åŠŸèƒ½ç›®å‰ä¸æˆç†Ÿã€‚

## æ¶ˆè´¹ MCP æœåŠ¡å™¨

Embabel æ™ºèƒ½ä½“æ¡†æ¶æä¾›å¯¹æ¶ˆè´¹æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) æœåŠ¡å™¨çš„å†…ç½®æ”¯æŒï¼Œå…è®¸æ‚¨é€šè¿‡æ ‡å‡†åŒ–æ¥å£æ‰©å±•åº”ç”¨ç¨‹åºçš„å¼ºå¤§ AI åŠŸèƒ½ã€‚

### ä»€ä¹ˆæ˜¯ MCPï¼Ÿ

æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œæ ‡å‡†åŒ–åº”ç”¨ç¨‹åºå¦‚ä½•ä¸ºå¤§è¯­è¨€æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡å’Œé¢å¤–åŠŸèƒ½ã€‚ç”± Anthropic å¼•å…¥ï¼ŒMCP å·²æˆä¸ºè¿æ¥ AI æ™ºèƒ½ä½“åˆ°å·¥å…·çš„äº‹å®æ ‡å‡†ï¼Œä½œä¸ºå®¢æˆ·ç«¯-æœåŠ¡å™¨åè®®è¿è¡Œï¼Œå…¶ä¸­ï¼š

- **å®¢æˆ·ç«¯**ï¼ˆå¦‚ Embabel æ™ºèƒ½ä½“ï¼‰å‘æœåŠ¡å™¨å‘é€è¯·æ±‚
- **æœåŠ¡å™¨**å¤„ç†è¿™äº›è¯·æ±‚ä»¥å‘ AI æ¨¡å‹æä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡

MCP é€šè¿‡æ ‡å‡†åŒ–ç®€åŒ–äº† AI åº”ç”¨ç¨‹åºå’Œå¤–éƒ¨å·¥å…·ä¹‹é—´çš„é›†æˆï¼Œå°†"MÃ—N é—®é¢˜"è½¬æ¢ä¸º"M+N é—®é¢˜"â€”â€”ç±»ä¼¼äº USB å¯¹ç¡¬ä»¶å¤–è®¾æ‰€åšçš„ã€‚

### åœ¨ Embabel æ™ºèƒ½ä½“ä¸­é…ç½® MCP

è¦åœ¨æ‚¨çš„ Embabel æ™ºèƒ½ä½“åº”ç”¨ç¨‹åºä¸­é…ç½® MCP æœåŠ¡å™¨ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ‚¨çš„ `application.yml`ï¼š

```yaml
spring:
  ai:
    mcp:
      client:
        enabled: true
        name: embabel
        version: 1.0.0
        request-timeout: 30s
        type: SYNC
        stdio:
          connections:
            docker-mcp:
              command: docker
              args:
                - run
                - -i
                - --rm
                - alpine/socat
                - STDIO
                - TCP:host.docker.internal:8811
```

æ­¤é…ç½®è®¾ç½®äº†è¿æ¥åˆ°åŸºäº Docker çš„ MCP æœåŠ¡å™¨çš„ MCP å®¢æˆ·ç«¯ã€‚è¿æ¥é€šè¿‡ Docker çš„ socat å®ç”¨ç¨‹åºä½¿ç”¨ STDIO ä¼ è¾“è¿æ¥åˆ° TCP ç«¯ç‚¹ã€‚

### Docker Desktop MCP é›†æˆ

Docker é€šè¿‡å…¶ Docker MCP ç›®å½•å’Œå·¥å…·åŒ…æ‹¥æŠ±äº† MCPï¼Œæä¾›ï¼š

1. **é›†ä¸­å‘ç°** - é›†æˆåˆ° Docker Hub ä¸­ç”¨äºå‘ç° MCP å·¥å…·çš„å¯ä¿¡ä¸­å¿ƒ
2. **å®¹å™¨åŒ–éƒ¨ç½²** - å°† MCP æœåŠ¡å™¨ä½œä¸ºå®¹å™¨è¿è¡Œï¼Œæ— éœ€å¤æ‚è®¾ç½®
3. **å®‰å…¨å‡­æ®ç®¡ç†** - é›†ä¸­ã€åŠ å¯†çš„å‡­æ®å¤„ç†
4. **å†…ç½®å®‰å…¨æ€§** - æ²™ç›’éš”ç¦»å’Œæƒé™ç®¡ç†

Docker MCP ç”Ÿæ€ç³»ç»ŸåŒ…æ‹¬æ¥è‡ª Stripeã€Elasticã€Neo4j ç­‰åˆä½œä¼™ä¼´çš„ 100 å¤šä¸ªç»è¿‡éªŒè¯çš„å·¥å…·ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¯é€šè¿‡ Docker çš„åŸºç¡€è®¾æ–½è®¿é—®ã€‚

### äº†è§£æ›´å¤š

- [Docker MCP æ–‡æ¡£](https://docs.docker.com/desktop/features/gordon/mcp/)
- [Docker MCP æœåŠ¡å™¨ä»“åº“](https://github.com/docker/mcp-servers)
- [ä»‹ç» Docker MCP ç›®å½•å’Œå·¥å…·åŒ…](https://www.docker.com/blog/introducing-docker-mcp-catalog-and-toolkit/)
- [MCP ä»‹ç»å’Œæ¦‚è¿°](https://www.philschmid.de/mcp-introduction)

## A2A

Embabel ä¸ [A2A](https://github.com/google-a2a/A2A) åè®®é›†æˆï¼Œå…è®¸æ‚¨è¿æ¥åˆ°å…¶ä»–å¯ç”¨ A2A çš„æ™ºèƒ½ä½“å’ŒæœåŠ¡ã€‚

å¯ç”¨ `a2a` Spring é…ç½®æ–‡ä»¶ä»¥å¯åŠ¨ A2A æœåŠ¡å™¨ã€‚

æ‚¨éœ€è¦ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `GOOGLE_STUDIO_API_KEY`ï¼šæ‚¨çš„ Google Studio API å¯†é’¥ï¼Œç”¨äº Geminiã€‚

ä½¿ç”¨ `a2a` Docker é…ç½®æ–‡ä»¶å¯åŠ¨ Google A2A Web ç•Œé¢ï¼š

```bash
docker compose --profile a2a up
```

è½¬åˆ°åœ¨å®¹å™¨å†…è¿è¡Œçš„ Web ç•Œé¢ `http://localhost:12000/`ã€‚

åœ¨ `host.docker.internal:8080/a2a` è¿æ¥åˆ°æ‚¨çš„æ™ºèƒ½ä½“ã€‚æ³¨æ„ `localhost:8080/a2a` ä¸ä¼šå·¥ä½œï¼Œå› ä¸ºæœåŠ¡å™¨åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œæ—¶æ— æ³•è®¿é—®å®ƒã€‚

## è¿è¡Œæµ‹è¯•

é€šè¿‡ Maven è¿è¡Œæµ‹è¯•ã€‚

```bash
mvn test
```

è¿™å°†è¿è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œä½†ä¸éœ€è¦äº’è”ç½‘è¿æ¥æˆ–ä»»ä½•å¤–éƒ¨æœåŠ¡ã€‚

## Spring é…ç½®æ–‡ä»¶

Spring é…ç½®æ–‡ä»¶ç”¨äºä¸ºä¸åŒç¯å¢ƒå’Œè¡Œä¸ºé…ç½®åº”ç”¨ç¨‹åºã€‚

äº¤äº’é…ç½®æ–‡ä»¶ï¼š

- `shell`ï¼šåœ¨äº¤äº’å¼ shell ä¸­è¿è¡Œæ™ºèƒ½ä½“ã€‚ä¸å¯åŠ¨ Web è¿›ç¨‹ã€‚

æ¨¡å‹é…ç½®æ–‡ä»¶ï¼š

- `ollama`ï¼šæŸ¥æ‰¾ Ollama æ¨¡å‹ã€‚æ‚¨éœ€è¦åœ¨æœ¬åœ°å®‰è£… Ollama å¹¶æ‹‰å–ç›¸å…³æ¨¡å‹ã€‚
- `docker-desktop`ï¼šåœ¨ Docker å¤–éƒ¨è¿è¡Œä½†ä¸å¸¦æœ‰ MCP æ‰©å±•çš„ Docker Desktop é€šä¿¡æ—¶æŸ¥æ‰¾ Docker ç®¡ç†çš„æœ¬åœ°æ¨¡å‹ã€‚**è¿™æ˜¯æ¨èçš„æœ€ä½³ä½“éªŒï¼Œå¸¦æœ‰ Docker æä¾›çš„ç½‘ç»œå·¥å…·ã€‚**
- `docker`ï¼šåœ¨ Docker å®¹å™¨ä¸­è¿è¡Œæ—¶æŸ¥æ‰¾ Docker ç®¡ç†çš„æœ¬åœ°æ¨¡å‹ã€‚

æ—¥å¿—é…ç½®æ–‡ä»¶ï¼š

- `severance`ï¼š[Severance](https://www.youtube.com/watch?v=xEQP4VVuyrY&ab_channel=AppleTV) ç‰¹å®šæ—¥å¿—è®°å½•ã€‚èµç¾ Kierï¼
- `starwars`ï¼šæ˜Ÿçƒå¤§æˆ˜ç‰¹å®šæ—¥å¿—è®°å½•ã€‚æ„Ÿå—åŸåŠ›
- `colossus`ï¼šColossus ç‰¹å®šæ—¥å¿—è®°å½•ã€‚Forbin é¡¹ç›®ã€‚

## æµ‹è¯•

æ­¤æ¡†æ¶çš„ä¸€ä¸ªå…³é”®ç›®æ ‡æ˜¯æ˜“äºæµ‹è¯•ã€‚æ­£å¦‚ Spring ç®€åŒ–äº†æ—©æœŸä¼ä¸š Java åº”ç”¨ç¨‹åºçš„æµ‹è¯•ä¸€æ ·ï¼Œæ­¤æ¡†æ¶ä¿ƒè¿›äº† AI åº”ç”¨ç¨‹åºçš„æµ‹è¯•ã€‚

æµ‹è¯•ç±»å‹ï¼š

- å•å…ƒæµ‹è¯•ï¼šæ‰€æœ‰æ™ºèƒ½ä½“éƒ½æ˜¯å•å…ƒå¯æµ‹è¯•çš„ï¼Œå°±åƒä»»ä½• Spring ç®¡ç†çš„ bean ä¸€æ ·ã€‚ä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡æ„é€ å®ƒä»¬ï¼›è°ƒç”¨å•ä¸ªåŠ¨ä½œæ–¹æ³•ã€‚æµ‹è¯•åº“ä¿ƒè¿›æµ‹è¯•æç¤ºã€‚
- é›†æˆæµ‹è¯•ï¼šå¾…å®š

## æ—¥å¿—è®°å½•

æ­¤é¡¹ç›®ä¸­çš„æ‰€æœ‰æ—¥å¿—è®°å½•è¦ä¹ˆæ˜¯ç›¸å…³ç±»æœ¬èº«çš„è°ƒè¯•æ—¥å¿—è®°å½•ï¼Œè¦ä¹ˆæ˜¯ç»“æœã€‚